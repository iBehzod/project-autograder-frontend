<ng-template appPlaceholder></ng-template>

<div class="auth-page">
  <div class="auth-card">
    <div class="brand">
      <div class="brand-icon"><i class="fa-solid fa-graduation-cap"></i></div>
      <span>Autograder Pro</span>
    </div>

    <!-- Success Message -->
    <div class="alert-success" *ngIf="successMessage">
      <i class="fa-solid fa-check-circle"></i> {{successMessage}}
    </div>

    <div *ngIf="isLoading" class="loading-wrapper">
      <app-loading-spinner></app-loading-spinner>
    </div>

    <!-- Login Form -->
    <div *ngIf="!isLoading && !showForgotPassword">
      <h2>Welcome Back</h2>
      <p class="subtitle">Enter your credentials to access the portal</p>

      <form #authForm="ngForm" (ngSubmit)="onSubmit(authForm)">
        <div class="input-group">
          <label for="username">Username</label>
          <input type="text" id="username" class="form-control" ngModel name="username" required
            placeholder="Enter your username" />
        </div>
        <div class="input-group">
          <label for="password">Password</label>
          <input type="password" id="password" class="form-control" ngModel name="password" required minlength="3"
            placeholder="Enter your password" />
        </div>
        <button class="btn-primary" type="submit" [disabled]="!authForm.valid">Sign In</button>
        <p class="forgot-link">
          <a href="javascript:void(0)" (click)="onForgotPassword()">Forgot Password?</a>
        </p>
      </form>
    </div>

    <!-- Forgot Password Form -->
    <div *ngIf="!isLoading && showForgotPassword">
      <h2>Reset Password</h2>
      <p class="subtitle">Enter your email address and we'll send you a reset link.</p>

      <form #forgotForm="ngForm" (ngSubmit)="onSubmitForgotPassword(forgotForm)">
        <div class="input-group">
          <label for="email">Email</label>
          <input type="email" id="email" class="form-control" ngModel name="email" required email
            placeholder="your@email.com" />
        </div>
        <button class="btn-primary" type="submit" [disabled]="!forgotForm.valid">Send Reset Link</button>
        <p class="forgot-link">
          <a href="javascript:void(0)" (click)="onBackToLogin()">Back to Login</a>
        </p>
      </form>
    </div>
  </div>
</div>